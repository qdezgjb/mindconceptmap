# Concept-Map-New æ¦‚å¿µå›¾è‡ªåŠ¨ç”Ÿæˆç³»ç»Ÿ ä»£ç å®¡æŸ¥æ–‡æ¡£

> ç‰ˆæœ¬: 1.0.0  
> æ—¥æœŸ: 2025å¹´12æœˆ18æ—¥  
> å®¡æŸ¥èŒƒå›´: å®Œæ•´é¡¹ç›®ä»£ç 

---

## ç›®å½•

1. [é¡¹ç›®æ¦‚è§ˆ](#1-é¡¹ç›®æ¦‚è§ˆ)
2. [ç³»ç»Ÿæ¶æ„](#2-ç³»ç»Ÿæ¶æ„)
3. [æ¨¡å—è¯¦è§£](#3-æ¨¡å—è¯¦è§£)
   - [ç®—æ³•æ¨¡å— (algorithm/)](#31-ç®—æ³•æ¨¡å—-algorithm)
   - [å‰ç«¯æ ¸å¿ƒæ¨¡å— (web/)](#32-å‰ç«¯æ ¸å¿ƒæ¨¡å—-web)
   - [LLM æœåŠ¡æ¨¡å— (llm/)](#33-llm-æœåŠ¡æ¨¡å—-llm)
   - [ä»£ç†æœåŠ¡æ¨¡å— (agent/)](#34-ä»£ç†æœåŠ¡æ¨¡å—-agent)
4. [æ•°æ®æµç¨‹](#4-æ•°æ®æµç¨‹)
5. [åŠŸèƒ½æ¸…å•](#5-åŠŸèƒ½æ¸…å•)
6. [æŠ€æœ¯æ ˆ](#6-æŠ€æœ¯æ ˆ)

---

## 1. é¡¹ç›®æ¦‚è§ˆ

### 1.1 é¡¹ç›®ç®€ä»‹

Concept-Map-New æ˜¯ä¸€ä¸ªåŸºäº AI çš„æ™ºèƒ½æ¦‚å¿µå›¾ç”Ÿæˆä¸ç¼–è¾‘å¹³å°ã€‚ç³»ç»Ÿæ”¯æŒå¤šç§è¾“å…¥æ–¹å¼ï¼ˆç„¦ç‚¹é—®é¢˜ã€æ–‡æœ¬åˆ†æã€å›¾ç‰‡è¯†åˆ«ï¼‰ï¼Œç»“åˆå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰è‡ªåŠ¨ç”Ÿæˆç»“æ„åŒ–çš„æ¦‚å¿µå›¾ï¼Œå¹¶æä¾›ä¸°å¯Œçš„å›¾å½¢ç¼–è¾‘å’Œäº¤äº’åŠŸèƒ½ã€‚

### 1.2 æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½æ¨¡å— | æè¿° |
|---------|------|
| ğŸ”¬ è¿·æ€æ¦‚å¿µæ¢æŸ¥ | è¾“å…¥çŸ¥è¯†ç‚¹ï¼ŒAI åˆ†æäº§å‡ºç›¸å…³è¿·æ€æ¦‚å¿µ |
| ğŸ” ç„¦ç‚¹é—®é¢˜ç”Ÿæˆ | è¾“å…¥ç„¦ç‚¹é—®é¢˜ï¼Œè‡ªåŠ¨ç”Ÿæˆæ¦‚å¿µå›¾ |
| ğŸ“ æ–‡æœ¬åˆ†æç”Ÿæˆ | åˆ†ææ–‡æœ¬å†…å®¹ï¼Œæå–æ¦‚å¿µç”Ÿæˆå›¾è°± |
| ğŸ–¼ï¸ å›¾ç‰‡ç”Ÿæˆæ¦‚å¿µå›¾ | ä»å›¾ç‰‡ä¸­è¯†åˆ«æ–‡å­—å¹¶ç”Ÿæˆæ¦‚å¿µå›¾ |
| â­ æ¦‚å¿µå›¾è¯„ä»· | AI è‡ªåŠ¨è¯„ä»·æ¦‚å¿µå›¾è´¨é‡ |
| ğŸ—ºï¸ æ”¯æ¶æ¦‚å¿µå›¾ç”Ÿæˆ | é«˜/ä½æ”¯æ¶æ¨¡å¼çš„æ¦‚å¿µå›¾ç”Ÿæˆ |

### 1.3 é¡¹ç›®ç»“æ„

```
concept-map-new-master/
â”œâ”€â”€ algorithm/                    # å¸ƒå±€ç®—æ³•æ¨¡å—
â”‚   â”œâ”€â”€ layout-algorithms.js      # å¸ƒå±€ç®—æ³•å…¥å£ï¼ˆæ™ºèƒ½å¸ƒå±€ï¼‰
â”‚   â”œâ”€â”€ sugiyama-layout.js        # Sugiyama å±‚æ¬¡å¸ƒå±€ç®—æ³•
â”‚   â”œâ”€â”€ force-directed-layout.js  # åŠ›å¯¼å‘å¸ƒå±€ç®—æ³•
â”‚   â””â”€â”€ data-processing.js        # æ•°æ®å¤„ç†å·¥å…·
â”œâ”€â”€ web/                          # å‰ç«¯æ¨¡å—
â”‚   â”œâ”€â”€ index.html                # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ styles.css                # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ core.js                   # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ (6263è¡Œ)
â”‚   â”œâ”€â”€ renderer.js               # SVG æ¸²æŸ“æ¨¡å— (3930è¡Œ)
â”‚   â”œâ”€â”€ interactions.js           # äº¤äº’æ“ä½œæ¨¡å— (2205è¡Œ)
â”‚   â”œâ”€â”€ utilities.js              # å·¥å…·å‡½æ•°æ¨¡å— (888è¡Œ)
â”‚   â””â”€â”€ process-updater.js        # æµç¨‹çŠ¶æ€æ›´æ–°
â”œâ”€â”€ llm/                          # LLM æœåŠ¡æ¨¡å—
â”‚   â”œâ”€â”€ app.py                    # Python åç«¯æœåŠ¡ (FastAPI)
â”‚   â”œâ”€â”€ llm-manager.js            # LLM ç®¡ç†å™¨ï¼ˆä¸‰å…ƒç»„æå–ï¼‰
â”‚   â”œâ”€â”€ focus-question-service.js # ç„¦ç‚¹é—®é¢˜æå–æœåŠ¡
â”‚   â”œâ”€â”€ introduction-service.js   # ä»‹ç»æ–‡æœ¬ç”ŸæˆæœåŠ¡
â”‚   â”œâ”€â”€ image-concept-map-service.js # å›¾åƒæ¦‚å¿µå›¾æœåŠ¡
â”‚   â””â”€â”€ concept-map-evaluation-service.js # æ¦‚å¿µå›¾è¯„ä»·æœåŠ¡
â”œâ”€â”€ agent/                        # ä»£ç†æœåŠ¡æ¨¡å—
â”‚   â”œâ”€â”€ dify-service.js           # Dify AI å¯¹è¯æœåŠ¡
â”‚   â””â”€â”€ misconception-service.js  # è¿·æ€æ¦‚å¿µæ¢æŸ¥æœåŠ¡
â”œâ”€â”€ requirements.txt              # Python ä¾èµ–
â”œâ”€â”€ start.bat                     # Windows å¯åŠ¨è„šæœ¬
â””â”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
```

---

## 2. ç³»ç»Ÿæ¶æ„

### 2.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              å‰ç«¯å±‚ (Web)                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   core.js    â”‚  â”‚ renderer.js  â”‚  â”‚interactions.jsâ”‚  â”‚ utilities.js â”‚     â”‚
â”‚  â”‚  æ ¸å¿ƒé€»è¾‘    â”‚  â”‚  SVGæ¸²æŸ“     â”‚  â”‚  ç”¨æˆ·äº¤äº’    â”‚  â”‚   å·¥å…·å‡½æ•°   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                 â”‚                 â”‚
          â–¼                 â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           æœåŠ¡å±‚ (LLM + Agent)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ llm-manager.js â”‚  â”‚ dify-service.jsâ”‚  â”‚  focus-question-service.js â”‚     â”‚
â”‚  â”‚   ä¸‰å…ƒç»„æå–   â”‚  â”‚   AIå¯¹è¯æœåŠ¡   â”‚  â”‚     ç„¦ç‚¹é—®é¢˜æå–æœåŠ¡        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                   â”‚                        â”‚
            â–¼                   â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           åç«¯å±‚ (Python FastAPI)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                          app.py                                      â”‚    â”‚
â”‚  â”‚  - /chat: å¯¹è¯æ¥å£           - /chat/stream: æµå¼å¯¹è¯æ¥å£            â”‚    â”‚
â”‚  â”‚  - /extract-triples: ä¸‰å…ƒç»„  - /analyze-concept-map: æ¦‚å¿µå›¾åˆ†æ      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                   â”‚                        â”‚
            â–¼                   â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           AI æ¨¡å‹å±‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   DeepSeek     â”‚  â”‚   Qwen VL      â”‚  â”‚        Dify AI             â”‚     â”‚
â”‚  â”‚   æ–‡æœ¬å¤„ç†     â”‚  â”‚   å›¾åƒç†è§£     â”‚  â”‚       å·¥ä½œæµå¯¹è¯           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å¸ƒå±€ç®—æ³•æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å¸ƒå±€ç®—æ³•æ¨¡å— (algorithm/)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚  â”‚  layout-algorithms.js   â”‚ â† ç»Ÿä¸€å…¥å£                                  â”‚
â”‚  â”‚  - applyIntelligentLayout()                                          â”‚
â”‚  â”‚  - calculateNodeDimensions()                                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚               â–¼                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  sugiyama-layout.js     â”‚    â”‚ force-directed-layout.jsâ”‚             â”‚
â”‚  â”‚  Sugiyamaå±‚æ¬¡å¸ƒå±€       â”‚    â”‚    åŠ›å¯¼å‘å¸ƒå±€            â”‚             â”‚
â”‚  â”‚  - å±‚çº§åˆ†é…             â”‚    â”‚    - åŠ›å­¦æ¨¡æ‹Ÿ           â”‚             â”‚
â”‚  â”‚  - äº¤å‰æœ€å°åŒ–           â”‚    â”‚    - å¼¹ç°§æ¨¡å‹           â”‚             â”‚
â”‚  â”‚  - èŠ‚ç‚¹å®šä½             â”‚    â”‚    - ç¢°æ’æ£€æµ‹           â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚               â”‚                              â”‚                          â”‚
â”‚               â–¼                              â–¼                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     data-processing.js                            â”‚  â”‚
â”‚  â”‚  - æ•°æ®è§£æä¸éªŒè¯                                                 â”‚  â”‚
â”‚  â”‚  - èŠ‚ç‚¹/è¿çº¿é¢„å¤„ç†                                                â”‚  â”‚
â”‚  â”‚  - å±‚çº§ä¿¡æ¯æå–                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. æ¨¡å—è¯¦è§£

### 3.1 ç®—æ³•æ¨¡å— (algorithm/)

#### 3.1.1 layout-algorithms.js - æ™ºèƒ½å¸ƒå±€å…¥å£

**æ–‡ä»¶è·¯å¾„**: `algorithm/layout-algorithms.js`

**åŠŸèƒ½è¯´æ˜**: æä¾›ç»Ÿä¸€çš„å¸ƒå±€ç®—æ³•å…¥å£ï¼Œæ ¹æ®å›¾å½¢ç‰¹å¾è‡ªåŠ¨é€‰æ‹©æœ€åˆé€‚çš„å¸ƒå±€æ–¹å¼ã€‚

| å‡½æ•°å | åŠŸèƒ½æè¿° |
|--------|----------|
| `applyIntelligentLayout(graphData)` | æ™ºèƒ½å¸ƒå±€ä¸»å…¥å£ï¼Œè‡ªåŠ¨é€‰æ‹©æœ€ä½³å¸ƒå±€ç®—æ³• |
| `calculateNodeDimensions(label, minWidth, height, fontSize)` | è®¡ç®—èŠ‚ç‚¹å°ºå¯¸ |
| `detectLayoutType(graphData)` | æ£€æµ‹å›¾å½¢ç»“æ„ç±»å‹ |
| `selectOptimalLayout(graphType)` | æ ¹æ®å›¾å½¢ç±»å‹é€‰æ‹©å¸ƒå±€ç®—æ³• |

#### 3.1.2 sugiyama-layout.js - Sugiyama å±‚æ¬¡å¸ƒå±€

**æ–‡ä»¶è·¯å¾„**: `algorithm/sugiyama-layout.js`

**åŠŸèƒ½è¯´æ˜**: å®ç°ç»å…¸çš„ Sugiyama å±‚æ¬¡å¸ƒå±€ç®—æ³•ï¼Œé€‚ç”¨äºæœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰çš„å±‚æ¬¡åŒ–å±•ç¤ºã€‚

| å‡½æ•°å | åŠŸèƒ½æè¿° |
|--------|----------|
| `applySugiyamaLayout(graphData)` | Sugiyama å¸ƒå±€ä¸»å…¥å£ |
| `assignLayers(nodes, links)` | åˆ†é…èŠ‚ç‚¹å±‚çº§ |
| `reorderLayers(layers, links)` | å±‚å†…èŠ‚ç‚¹é‡æ’åºï¼ˆå‡å°‘äº¤å‰ï¼‰ |
| `assignCoordinates(layers, config)` | è®¡ç®—èŠ‚ç‚¹åæ ‡ |
| `minimizeCrossings(layers, links)` | äº¤å‰æœ€å°åŒ–ç®—æ³• |
| `barycenterMethod(layer, adjacentLayer, links)` | é‡å¿ƒæ³•æ’åº |
| `calculateBarycenters(layer, adjacentLayer, links)` | è®¡ç®—é‡å¿ƒå€¼ |
| `resolveOverlaps(layers, config)` | è§£å†³èŠ‚ç‚¹é‡å  |

#### 3.1.3 force-directed-layout.js - åŠ›å¯¼å‘å¸ƒå±€

**æ–‡ä»¶è·¯å¾„**: `algorithm/force-directed-layout.js`

**åŠŸèƒ½è¯´æ˜**: å®ç°åŠ›å¯¼å‘å¸ƒå±€ç®—æ³•ï¼Œä½¿ç”¨ç‰©ç†æ¨¡æ‹Ÿæ–¹æ³•è‡ªåŠ¨å¸ƒå±€å›¾å½¢ã€‚

| å‡½æ•°å | åŠŸèƒ½æè¿° |
|--------|----------|
| `applyForceDirectedLayout(graphData, options)` | åŠ›å¯¼å‘å¸ƒå±€ä¸»å…¥å£ |
| `initializePositions(nodes, width, height)` | åˆå§‹åŒ–èŠ‚ç‚¹ä½ç½® |
| `calculateForces(nodes, links, config)` | è®¡ç®—èŠ‚ç‚¹å—åŠ› |
| `applyForces(nodes, forces, damping)` | åº”ç”¨åŠ›åˆ°èŠ‚ç‚¹ |
| `detectCollisions(nodes, nodeRadius)` | ç¢°æ’æ£€æµ‹ |
| `resolveCollisions(nodes, nodeRadius)` | ç¢°æ’è§£å†³ |
| `centerGraph(nodes, width, height)` | å›¾å½¢å±…ä¸­ |

#### 3.1.4 data-processing.js - æ•°æ®å¤„ç†

**æ–‡ä»¶è·¯å¾„**: `algorithm/data-processing.js`

**åŠŸèƒ½è¯´æ˜**: æä¾›æ¦‚å¿µå›¾æ•°æ®çš„è§£æã€éªŒè¯å’Œé¢„å¤„ç†åŠŸèƒ½ã€‚

| å‡½æ•°å | åŠŸèƒ½æè¿° |
|--------|----------|
| `parseGraphData(rawData)` | è§£æåŸå§‹å›¾å½¢æ•°æ® |
| `validateGraphData(graphData)` | éªŒè¯å›¾å½¢æ•°æ®å®Œæ•´æ€§ |
| `normalizeLinks(links, nodes)` | è§„èŒƒåŒ–è¿çº¿æ•°æ® |
| `extractLayerInfo(nodes, links)` | æå–å±‚çº§ä¿¡æ¯ |
| `preprocessNodes(nodes)` | èŠ‚ç‚¹é¢„å¤„ç† |
| `preprocessLinks(links)` | è¿çº¿é¢„å¤„ç† |
| `mergeGraphData(base, additional)` | åˆå¹¶å›¾å½¢æ•°æ® |

---

### 3.2 å‰ç«¯æ ¸å¿ƒæ¨¡å— (web/)

#### 3.2.1 core.js - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘

**æ–‡ä»¶è·¯å¾„**: `web/core.js`  
**ä»£ç è¡Œæ•°**: 6263 è¡Œ

**åŠŸèƒ½è¯´æ˜**: ç³»ç»Ÿçš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘æ¨¡å—ï¼ŒåŒ…å«é¡µé¢åˆå§‹åŒ–ã€æ¦‚å¿µå›¾ç”Ÿæˆã€æ”¯æ¶æ¨¡å¼ã€æ•°æ®ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

##### é¡µé¢åˆå§‹åŒ–ä¸åŸºç¡€åŠŸèƒ½

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `cleanup()` | 35 | æ¸…ç†èµ„æºå’ŒçŠ¶æ€ |
| `initializePage()` | 45 | é¡µé¢åˆå§‹åŒ–å…¥å£ |
| `displayUploadedImage(imageData, fileName)` | 85 | æ˜¾ç¤ºä¸Šä¼ çš„å›¾ç‰‡ |
| `resetView()` | 4816 | é‡ç½®è§†å›¾çŠ¶æ€ |
| `resetGenerateButtons()` | 5019 | é‡ç½®ç”ŸæˆæŒ‰é’®çŠ¶æ€ |
| `clearPreviousConceptMap()` | 5467 | æ¸…é™¤ä¹‹å‰çš„æ¦‚å¿µå›¾ |

##### æ¦‚å¿µå›¾ç”ŸæˆåŠŸèƒ½

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `generateConceptMapWithLLM(type, data)` | 5033 | LLM æ¦‚å¿µå›¾ç”Ÿæˆä¸»å…¥å£ |
| `generateConceptMapFromImage(imageData, fileName)` | 4456 | ä»å›¾ç‰‡ç”Ÿæˆæ¦‚å¿µå›¾ |
| `analyzeUploadedConceptMap(imageData, fileName)` | 4678 | åˆ†æä¸Šä¼ çš„æ¦‚å¿µå›¾ |
| `generateFocusQuestion(type, data)` | 5436 | ç”Ÿæˆç„¦ç‚¹é—®é¢˜ |
| `extractConceptsAndRelations(triples)` | 959 | ä»ä¸‰å…ƒç»„æå–æ¦‚å¿µå’Œå…³ç³» |
| `exploreMisconception(topic)` | 177 | æ¢æŸ¥è¿·æ€æ¦‚å¿µ |

##### é«˜æ”¯æ¶æ¨¡å¼åŠŸèƒ½

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `generateHighScaffoldConceptMap(focusQuestion)` | 432 | ç”Ÿæˆé«˜æ”¯æ¶æ¦‚å¿µå›¾ |
| `setupScaffoldLayout()` | 2231 | è®¾ç½®æ”¯æ¶å¸ƒå±€ |
| `displayIncompleteConceptMap(graphData)` | 2743 | æ˜¾ç¤ºä¸å®Œæ•´æ¦‚å¿µå›¾ |
| `displayCandidateNodes(candidateNodes)` | 3152 | æ˜¾ç¤ºå€™é€‰èŠ‚ç‚¹ |
| `addCandidateNodeToGraph(...)` | 3342 | æ·»åŠ å€™é€‰èŠ‚ç‚¹åˆ°å›¾ |
| `markCandidateNodeAsAdded(nodeId, isCorrect)` | 3474 | æ ‡è®°å·²æ·»åŠ çš„å€™é€‰èŠ‚ç‚¹ |
| `drawPlaceholderBoxes(placeholders)` | 4005 | ç»˜åˆ¶å ä½ç¬¦æ¡† |
| `checkNodeCorrectness(node, placeholderNodeId)` | 4125 | æ£€æŸ¥èŠ‚ç‚¹æ­£ç¡®æ€§ |
| `updateCorrectnessStats()` | 4178 | æ›´æ–°æ­£ç¡®ç‡ç»Ÿè®¡ |
| `checkScaffoldCompletion()` | 4249 | æ£€æŸ¥æ”¯æ¶å®ŒæˆçŠ¶æ€ |
| `displayExpertConceptMap(expertData)` | 4299 | æ˜¾ç¤ºä¸“å®¶æ¦‚å¿µå›¾ |
| `exportScaffoldConceptMap()` | 2352 | å¯¼å‡ºæ”¯æ¶æ¦‚å¿µå›¾ |
| `exportExpertConceptMap()` | 2589 | å¯¼å‡ºä¸“å®¶æ¦‚å¿µå›¾ |

##### ä½æ”¯æ¶æ¨¡å¼åŠŸèƒ½

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `generateLowScaffoldConceptMap(focusQuestion)` | 746 | ç”Ÿæˆä½æ”¯æ¶æ¦‚å¿µå›¾ |
| `setupLowScaffoldLayout()` | 1090 | è®¾ç½®ä½æ”¯æ¶å¸ƒå±€ |
| `displayLowScaffoldConcepts(concepts)` | 1282 | æ˜¾ç¤ºä½æ”¯æ¶æ¦‚å¿µåˆ—è¡¨ |
| `displayLowScaffoldRelations(relations)` | 1427 | æ˜¾ç¤ºä½æ”¯æ¶å…³ç³»åˆ—è¡¨ |
| `initLowScaffoldInteractions()` | 1552 | åˆå§‹åŒ–ä½æ”¯æ¶äº¤äº’ |
| `addLowScaffoldNode(conceptId, label, x, y)` | 1621 | æ·»åŠ ä½æ”¯æ¶èŠ‚ç‚¹ |
| `bindLowScaffoldNodeEvents(nodeGroup, nodeData)` | 1697 | ç»‘å®šä½æ”¯æ¶èŠ‚ç‚¹äº‹ä»¶ |
| `startLowScaffoldLinking(sourceNodeId)` | 1792 | å¼€å§‹ä½æ”¯æ¶è¿çº¿ |
| `cancelLowScaffoldLinking()` | 1813 | å–æ¶ˆä½æ”¯æ¶è¿çº¿ |
| `createLowScaffoldLink(sourceId, targetId)` | 1833 | åˆ›å»ºä½æ”¯æ¶è¿çº¿ |
| `drawLowScaffoldLink(link, sourceNode, targetNode)` | 1875 | ç»˜åˆ¶ä½æ”¯æ¶è¿çº¿ |
| `bindLowScaffoldLinkEvents(linkGroup, link)` | 1946 | ç»‘å®šä½æ”¯æ¶è¿çº¿äº‹ä»¶ |
| `updateLowScaffoldLinks(nodeId)` | 2012 | æ›´æ–°ä½æ”¯æ¶è¿çº¿ |
| `markConceptAsUsed(conceptId)` | 2065 | æ ‡è®°å·²ä½¿ç”¨çš„æ¦‚å¿µ |
| `markRelationAsUsed(relationId)` | 2084 | æ ‡è®°å·²ä½¿ç”¨çš„å…³ç³» |

##### æ”¯æ¶æ’¤é”€åŠŸèƒ½

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `saveScaffoldUndoState(actionType, actionData)` | 3739 | ä¿å­˜æ”¯æ¶æ’¤é”€çŠ¶æ€ |
| `scaffoldUndo()` | 3792 | æ”¯æ¶æ’¤é”€æ“ä½œ |
| `rebindCandidateNodeDragEvents(nodeItem, node)` | 3889 | é‡æ–°ç»‘å®šæ‹–æ‹½äº‹ä»¶ |
| `clearScaffoldUndoStack()` | 3963 | æ¸…é™¤æ’¤é”€æ ˆ |
| `initScaffoldKeyboardShortcuts()` | 3971 | åˆå§‹åŒ–é”®ç›˜å¿«æ·é”® |
| `restoreNodeLinks(nodeId)` | 4080 | æ¢å¤èŠ‚ç‚¹è¿çº¿ |

##### è¾…åŠ©åŠŸèƒ½

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `removeNodesForScaffold(fullGraphData)` | 2099 | ä¸ºæ”¯æ¶ç§»é™¤èŠ‚ç‚¹ |
| `findPlaceholderNodeAtPosition(e, svg)` | 2853 | æŸ¥æ‰¾ä½ç½®å¤„çš„å ä½ç¬¦ |
| `highlightPlaceholderNode(nodeElement)` | 2909 | é«˜äº®å ä½ç¬¦èŠ‚ç‚¹ |
| `clearPlaceholderHighlight()` | 2959 | æ¸…é™¤å ä½ç¬¦é«˜äº® |
| `setupGraphDropZone()` | 3003 | è®¾ç½®å›¾å½¢æ‹–æ”¾åŒºåŸŸ |
| `addCandidateNodeToGraphAtPosition(node, x, y)` | 3251 | åœ¨æŒ‡å®šä½ç½®æ·»åŠ èŠ‚ç‚¹ |
| `applyLayoutAndRedraw()` | 3516 | åº”ç”¨å¸ƒå±€å¹¶é‡ç»˜ |
| `redrawWithoutLayout()` | 3684 | ä¸æ”¹å˜å¸ƒå±€é‡ç»˜ |
| `adjustExpertMapViewBox(svg, graphData)` | 4416 | è°ƒæ•´ä¸“å®¶å›¾ viewBox |
| `doExportExpertSvg(...)` | 2641 | æ‰§è¡Œä¸“å®¶å›¾ SVG å¯¼å‡º |
| `bindLowScaffoldButtonEvents(...)` | 1248 | ç»‘å®šä½æ”¯æ¶æŒ‰é’®äº‹ä»¶ |
| `addFocusQuestion()` | 6128 | æ·»åŠ ç„¦ç‚¹é—®é¢˜ |
| `addAggregatedLink()` | 6174 | æ·»åŠ èšåˆè¿çº¿ |
| `addSameLayerLink()` | 6205 | æ·»åŠ åŒçº§è¿çº¿ |
| `addSameLayerAggregatedLink()` | 6236 | æ·»åŠ åŒçº§èšåˆè¿çº¿ |

---

#### 3.2.2 renderer.js - SVG æ¸²æŸ“æ¨¡å—

**æ–‡ä»¶è·¯å¾„**: `web/renderer.js`  
**ä»£ç è¡Œæ•°**: 3930 è¡Œ

**åŠŸèƒ½è¯´æ˜**: è´Ÿè´£æ¦‚å¿µå›¾çš„ SVG æ¸²æŸ“ã€ç”»å¸ƒç®¡ç†ã€èŠ‚ç‚¹/è¿çº¿ç»˜åˆ¶ç­‰æ ¸å¿ƒå¯è§†åŒ–åŠŸèƒ½ã€‚

##### æ ¸å¿ƒæ¸²æŸ“åŠŸèƒ½

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `displayConceptMap(graphData)` | 134 | æ˜¾ç¤ºæ¦‚å¿µå›¾ä¸»å…¥å£ |
| `drawGraph(data)` | 241 | ç»˜åˆ¶å›¾å½¢ |
| `enableCanvasZoom()` | 775 | å¯ç”¨ç”»å¸ƒç¼©æ”¾ |
| `ensureCanvasVisible()` | 2399 | ç¡®ä¿ç”»å¸ƒå¯è§ |
| `ensureGraphInitialized()` | 2419 | ç¡®ä¿å›¾å½¢å·²åˆå§‹åŒ– |

##### æ›²çº¿å’Œè¿çº¿æ¸²æŸ“

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `getBezierPoint(t, p0, p1, p2)` | 16 | è®¡ç®—è´å¡å°”æ›²çº¿ç‚¹ |
| `calculateCurvedLinkPositions(...)` | 34 | è®¡ç®—æ›²çº¿è¿çº¿ä½ç½® |
| `updateConnectedLinks(nodeId)` | 1124 | æ›´æ–°è¿æ¥çš„è¿çº¿ |
| `redrawSingleLink(link)` | 1411 | é‡ç»˜å•æ¡è¿çº¿ |
| `updateLinkPosition(linkGroup, link)` | 1675 | æ›´æ–°è¿çº¿ä½ç½® |
| `redrawAllLinks()` | 1875 | é‡ç»˜æ‰€æœ‰è¿çº¿ |
| `resolveLinkLabelOverlaps()` | 939 | è§£å†³è¿çº¿æ ‡ç­¾é‡å  |

##### èšåˆè¿çº¿åŠŸèƒ½

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `detectAggregatedLinks(links)` | 3020 | æ£€æµ‹èšåˆè¿çº¿ |
| `drawAggregatedLink(group, nodeById, allNodes, allLinks)` | 3063 | ç»˜åˆ¶èšåˆè¿çº¿ |
| `editAggregateLinkLabel(group)` | 3308 | ç¼–è¾‘èšåˆè¿çº¿æ ‡ç­¾ |
| `updateAggregatedLinkPosition(...)` | 1239 | æ›´æ–°èšåˆè¿çº¿ä½ç½® |

##### åŒçº§èšåˆè¿çº¿åŠŸèƒ½

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `detectSameLayerAggregatedLinks(links, nodes)` | 3408 | æ£€æµ‹åŒçº§èšåˆè¿çº¿ |
| `drawSameLayerAggregatedLink(group, nodeById, allNodes)` | 3484 | ç»˜åˆ¶åŒçº§èšåˆè¿çº¿ |
| `editSameLayerAggregateLinkLabel(group)` | 3822 | ç¼–è¾‘åŒçº§èšåˆæ ‡ç­¾ |

##### ç„¦ç‚¹é—®é¢˜æ˜¾ç¤º

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `displayFocusQuestion()` | 2486 | æ˜¾ç¤ºç„¦ç‚¹é—®é¢˜ |
| `makeFocusQuestionDraggable(...)` | 2653 | ä½¿ç„¦ç‚¹é—®é¢˜å¯æ‹–æ‹½ |
| `editFocusQuestionText()` | 2772 | ç¼–è¾‘ç„¦ç‚¹é—®é¢˜æ–‡æœ¬ |

##### UI çŠ¶æ€ç®¡ç†

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `showLoadingAnimation()` | 2142 | æ˜¾ç¤ºåŠ è½½åŠ¨ç”» |
| `showContentLoadingState(type, data)` | 2243 | æ˜¾ç¤ºå†…å®¹åŠ è½½çŠ¶æ€ |
| `updateGenerationInfo(...)` | 2271 | æ›´æ–°ç”Ÿæˆä¿¡æ¯ |
| `updateErrorState(type, errorMessage)` | 2372 | æ›´æ–°é”™è¯¯çŠ¶æ€ |
| `hideLoadingState()` | 2386 | éšè—åŠ è½½çŠ¶æ€ |
| `showLoadingState()` | 2473 | æ˜¾ç¤ºåŠ è½½çŠ¶æ€ |
| `showMessage(message, type)` | 2953 | æ˜¾ç¤ºæ¶ˆæ¯æç¤º |
| `updateHistoryButtons()` | 2435 | æ›´æ–°å†å²æŒ‰é’®çŠ¶æ€ |
| `updateStatusBar(data)` | 2454 | æ›´æ–°çŠ¶æ€æ  |
| `updateNodeOperationButtons()` | 2997 | æ›´æ–°èŠ‚ç‚¹æ“ä½œæŒ‰é’® |

##### å·¥å…·å‡½æ•°

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `escapeHtml(text)` | 2264 | HTML è½¬ä¹‰ |
| `getGraphCenter()` | 818 | è·å–å›¾å½¢ä¸­å¿ƒ |

---

#### 3.2.3 interactions.js - äº¤äº’æ“ä½œæ¨¡å—

**æ–‡ä»¶è·¯å¾„**: `web/interactions.js`  
**ä»£ç è¡Œæ•°**: 2205 è¡Œ

**åŠŸèƒ½è¯´æ˜**: å¤„ç†ç”¨æˆ·ä¸æ¦‚å¿µå›¾çš„æ‰€æœ‰äº¤äº’æ“ä½œï¼ŒåŒ…æ‹¬èŠ‚ç‚¹æ“ä½œã€è¿çº¿æ“ä½œã€æ‹–æ‹½ç­‰ã€‚

##### èŠ‚ç‚¹æ“ä½œ

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `editNodeText(nodeId)` | 10 | ç¼–è¾‘èŠ‚ç‚¹æ–‡æœ¬ |
| `selectNode(nodeId)` | 181 | é€‰ä¸­èŠ‚ç‚¹ |
| `deselectNode()` | 261 | å–æ¶ˆé€‰ä¸­èŠ‚ç‚¹ |
| `selectAllNodes()` | 303 | é€‰ä¸­æ‰€æœ‰èŠ‚ç‚¹ |
| `addNewNode()` | 656 | æ·»åŠ æ–°èŠ‚ç‚¹ |
| `deleteSelectedNode()` | 708 | åˆ é™¤é€‰ä¸­èŠ‚ç‚¹ |
| `editSelectedNode()` | 763 | ç¼–è¾‘é€‰ä¸­èŠ‚ç‚¹ |

##### èŠ‚ç‚¹æ§åˆ¶æ‰‹æŸ„

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `addNodeHandles(nodeGroup)` | 426 | æ·»åŠ èŠ‚ç‚¹æ§åˆ¶æ‰‹æŸ„ |
| `createHandle(pos, index, nodeId)` | 466 | åˆ›å»ºæ§åˆ¶æ‰‹æŸ„ |
| `createArrow(direction)` | 502 | åˆ›å»ºç®­å¤´å›¾å½¢ |
| `removeNodeHandles(nodeGroup)` | 522 | ç§»é™¤èŠ‚ç‚¹æ§åˆ¶æ‰‹æŸ„ |

##### èŠ‚ç‚¹ç¼©æ”¾

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `addResizeHandlers(handle, direction, nodeId)` | 528 | æ·»åŠ ç¼©æ”¾å¤„ç†å™¨ |
| `handleResize(e)` | 555 | å¤„ç†ç¼©æ”¾æ“ä½œ |
| `handleResizeEnd(e)` | 628 | å¤„ç†ç¼©æ”¾ç»“æŸ |

##### è¿çº¿æ“ä½œ

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `selectLink(linkId)` | 358 | é€‰ä¸­è¿çº¿ |
| `deselectLink()` | 404 | å–æ¶ˆé€‰ä¸­è¿çº¿ |
| `editLinkLabel(linkId)` | 801 | ç¼–è¾‘è¿çº¿æ ‡ç­¾ |
| `deleteSelectedLink()` | 1262 | åˆ é™¤é€‰ä¸­è¿çº¿ |
| `editSelectedLink()` | 1291 | ç¼–è¾‘é€‰ä¸­è¿çº¿ |
| `updateLinkOperationButtons()` | 1314 | æ›´æ–°è¿çº¿æ“ä½œæŒ‰é’® |

##### è¿çº¿åˆ›å»º

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `addNewLink()` | 1036 | æ·»åŠ æ–°è¿çº¿å…¥å£ |
| `enterLinkCreationMode()` | 1060 | è¿›å…¥è¿çº¿åˆ›å»ºæ¨¡å¼ |
| `exitLinkCreationMode()` | 1084 | é€€å‡ºè¿çº¿åˆ›å»ºæ¨¡å¼ |
| `handleLinkNodeSelection(e)` | 1110 | å¤„ç†è¿çº¿èŠ‚ç‚¹é€‰æ‹© |
| `highlightNodeForLink(nodeId, type)` | 1143 | é«˜äº®è¿çº¿èŠ‚ç‚¹ |
| `clearTemporaryNodeSelection()` | 1160 | æ¸…é™¤ä¸´æ—¶é€‰æ‹© |
| `createLink(sourceId, targetId)` | 1208 | åˆ›å»ºè¿çº¿ |

##### è¿çº¿æ‹–æ‹½åˆ›å»º

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `enterConnectionMode(sourceNodeId, direction)` | 964 | è¿›å…¥è¿æ¥æ¨¡å¼ |
| `handleConnectionTargetSelection(e)` | 989 | å¤„ç†è¿æ¥ç›®æ ‡é€‰æ‹© |
| `exitConnectionMode()` | 1013 | é€€å‡ºè¿æ¥æ¨¡å¼ |
| `addConnectionHandlers(handle, direction, nodeId)` | 934 | æ·»åŠ è¿æ¥å¤„ç†å™¨ |
| `enterConnectionDragMode(sourceNodeId, direction, e)` | 1333 | è¿›å…¥æ‹–æ‹½è¿çº¿æ¨¡å¼ |
| `createVirtualConnectionLine(...)` | 1352 | åˆ›å»ºè™šæ‹Ÿè¿çº¿ |
| `handleConnectionDrag(e)` | 1410 | å¤„ç†è¿çº¿æ‹–æ‹½ |
| `handleConnectionDragEnd(e)` | 1438 | å¤„ç†è¿çº¿æ‹–æ‹½ç»“æŸ |

##### ç‚¹å‡»å¼è¿çº¿åˆ›å»º

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `enterClickLinkCreationMode(linkType)` | 1661 | è¿›å…¥ç‚¹å‡»å¼è¿çº¿æ¨¡å¼ |
| `enableNodeClickForLinkCreation()` | 1741 | å¯ç”¨èŠ‚ç‚¹ç‚¹å‡»è¿çº¿ |
| `handleNodeClickForLink(e)` | 1762 | å¤„ç†èŠ‚ç‚¹ç‚¹å‡»è¿çº¿ |
| `exitClickLinkCreationMode()` | 1924 | é€€å‡ºç‚¹å‡»å¼è¿çº¿æ¨¡å¼ |

##### ç‰¹æ®Šè¿çº¿åˆ›å»º

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `createAggregatedLinks(sourceId, targetIds)` | 2019 | åˆ›å»ºèšåˆè¿çº¿ |
| `createSameLayerLink(sourceId, targetId)` | 2071 | åˆ›å»ºåŒçº§è¿çº¿ |
| `createSameLayerAggregatedLinks(sourceId, targetIds)` | 2115 | åˆ›å»ºåŒçº§èšåˆè¿çº¿ |

##### èŠ‚ç‚¹æ‹–æ‹½

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `startDrag(nodeId, clientX, clientY)` | 1485 | å¼€å§‹æ‹–æ‹½ |
| `handleDrag(e)` | 1521 | å¤„ç†æ‹–æ‹½ |
| `handleDragEnd(e)` | 1596 | å¤„ç†æ‹–æ‹½ç»“æŸ |

---

#### 3.2.4 utilities.js - å·¥å…·å‡½æ•°æ¨¡å—

**æ–‡ä»¶è·¯å¾„**: `web/utilities.js`  
**ä»£ç è¡Œæ•°**: 888 è¡Œ

**åŠŸèƒ½è¯´æ˜**: æä¾›å¸ƒå±€æ§åˆ¶ã€è¿çº¿è·¯ç”±ã€å†å²ç®¡ç†ã€å¯¼å‡ºç­‰è¾…åŠ©åŠŸèƒ½ã€‚

##### å¸ƒå±€æ§åˆ¶

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `applyAutoLayout()` | 10 | è‡ªåŠ¨åº”ç”¨å¸ƒå±€ |
| `applyHierarchicalLayout(graphData)` | 25 | åº”ç”¨å±‚æ¬¡å¸ƒå±€ |
| `changeLayout(layoutType)` | 43 | åˆ‡æ¢å¸ƒå±€ç±»å‹ |

##### è¿çº¿è·¯ç”±

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `calculateSingleDetourPoint(...)` | 187 | è®¡ç®—å•ç»•è¡Œç‚¹ |
| `calculateDetourPoints(...)` | 275 | è®¡ç®—å¤šç»•è¡Œç‚¹ |
| `adjustNodePositionsToAvoidOverlap(...)` | 378 | è°ƒæ•´èŠ‚ç‚¹é¿å…é‡å  |
| `optimizeLabelPositions(nodes, links)` | 406 | ä¼˜åŒ–æ ‡ç­¾ä½ç½® |
| `calculateLabelOverlap(...)` | 461 | è®¡ç®—æ ‡ç­¾é‡å  |
| `ensureUniformSpacing(nodes, links)` | 498 | ç¡®ä¿é—´è·å‡åŒ€ |

##### å†å²ç®¡ç†

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `saveToHistory(data)` | 616 | ä¿å­˜åˆ°å†å² |
| `undoOperation()` | 641 | æ’¤é”€æ“ä½œ |
| `redoOperation()` | 657 | é‡åšæ“ä½œ |
| `clearHistory()` | 673 | æ¸…é™¤å†å² |

##### å¯¼å‡ºåŠŸèƒ½

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `saveConceptMap()` | 556 | ä¿å­˜æ¦‚å¿µå›¾ JSON |
| `loadConceptMap()` | 583 | åŠ è½½æ¦‚å¿µå›¾ JSON |
| `exportConceptMap()` | 687 | å¯¼å‡ºæ¦‚å¿µå›¾ |
| `downloadConceptMapImage()` | 703 | ä¸‹è½½ PNG å›¾ç‰‡ |
| `exitAllEditModes()` | 822 | é€€å‡ºæ‰€æœ‰ç¼–è¾‘æ¨¡å¼ |

---

#### 3.2.5 process-updater.js - æµç¨‹çŠ¶æ€æ›´æ–°

**æ–‡ä»¶è·¯å¾„**: `web/process-updater.js`  
**ä»£ç è¡Œæ•°**: 128 è¡Œ

**åŠŸèƒ½è¯´æ˜**: ç®¡ç†æ¦‚å¿µå›¾ç”Ÿæˆè¿‡ç¨‹ä¸­çš„æ­¥éª¤çŠ¶æ€æ˜¾ç¤ºå’Œè®¡æ—¶ã€‚

| å‡½æ•°å | è¡Œå· | åŠŸèƒ½æè¿° |
|--------|------|----------|
| `updateProcessStatus(step, status, finalDuration, mode)` | 8 | æ›´æ–°æµç¨‹çŠ¶æ€ |
| `renderProcessSteps(steps, currentStep, currentStatus)` | 72 | æ¸²æŸ“æµç¨‹æ­¥éª¤ |
| `clearProcessStatus()` | 116 | æ¸…é™¤æµç¨‹çŠ¶æ€ |

---

### 3.3 LLM æœåŠ¡æ¨¡å— (llm/)

#### 3.3.1 app.py - Python åç«¯æœåŠ¡

**æ–‡ä»¶è·¯å¾„**: `llm/app.py`

**åŠŸèƒ½è¯´æ˜**: åŸºäº FastAPI çš„åç«¯æœåŠ¡ï¼Œæä¾› LLM è°ƒç”¨ã€ä¸‰å…ƒç»„æå–ã€å›¾åƒåˆ†æç­‰ APIã€‚

##### æŠ€æœ¯ç‰¹ç‚¹
- **æ¡†æ¶**: FastAPI + Uvicorn
- **LLM æ¥å£**: OpenAI å…¼å®¹æ¥å£
- **æ”¯æŒæ¨¡å‹**: DeepSeekã€Qwen VL Plus
- **æµå¼è¾“å‡º**: SSE (Server-Sent Events)

##### API ç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | åŠŸèƒ½ |
|------|------|------|
| `/chat` | POST | æ™®é€šå¯¹è¯ï¼ˆéæµå¼ï¼‰ |
| `/chat/stream` | POST | æµå¼å¯¹è¯ |
| `/extract-triples` | POST | ä¸‰å…ƒç»„æå– |
| `/analyze-concept-map` | POST | æ¦‚å¿µå›¾åˆ†æï¼ˆéæµå¼ï¼‰ |
| `/analyze-concept-map/stream` | POST | æ¦‚å¿µå›¾åˆ†æï¼ˆæµå¼ï¼‰ |

---

#### 3.3.2 llm-manager.js - LLM ç®¡ç†å™¨

**æ–‡ä»¶è·¯å¾„**: `llm/llm-manager.js`

**åŠŸèƒ½è¯´æ˜**: å‰ç«¯ LLM è°ƒç”¨ç®¡ç†å™¨ï¼Œè´Ÿè´£æ„å»ºæç¤ºè¯å’Œå¤„ç†ä¸‰å…ƒç»„æå–ã€‚

##### ç±»: `LLMManager`

| æ–¹æ³• | åŠŸèƒ½æè¿° |
|------|----------|
| `constructor(apiBaseUrl)` | åˆå§‹åŒ– LLM ç®¡ç†å™¨ |
| `extractTriples(inputText, onChunk, onComplete, onError)` | æµå¼æå–ä¸‰å…ƒç»„ |
| `buildTripleExtractionPrompt(inputText)` | æ„å»ºä¸‰å…ƒç»„æå–æç¤ºè¯ |
| `buildSystemPrompt()` | æ„å»ºç³»ç»Ÿæç¤ºè¯ |
| `parseTriplesFromText(text)` | ä»æ–‡æœ¬è§£æä¸‰å…ƒç»„ |
| `validateTriple(triple)` | éªŒè¯ä¸‰å…ƒç»„æ ¼å¼ |

##### ä¸‰å…ƒç»„æå–è§„åˆ™
- ä¸¥æ ¼æŒ‰å±‚çº§æå–ï¼ˆL1â†’L2â†’L3â†’L4...ï¼‰
- ç¦æ­¢åå‘ã€è·¨å±‚ã€åŒå±‚æå–
- èŠ‚ç‚¹æ–‡å­—é™åˆ¶ 12 å­—ä»¥å†…
- æ¦‚å¿µè¯å¿…é¡»æ¥æºäºè¾“å…¥æ–‡æœ¬

---

#### 3.3.3 focus-question-service.js - ç„¦ç‚¹é—®é¢˜æœåŠ¡

**æ–‡ä»¶è·¯å¾„**: `llm/focus-question-service.js`

**åŠŸèƒ½è¯´æ˜**: ä»ç”¨æˆ·è¾“å…¥æ–‡æœ¬ä¸­æ™ºèƒ½æå–ç„¦ç‚¹é—®é¢˜ã€‚

##### ç±»: `FocusQuestionService`

| æ–¹æ³• | åŠŸèƒ½æè¿° |
|------|----------|
| `constructor(apiBaseUrl)` | åˆå§‹åŒ–æœåŠ¡ |
| `extractFocusQuestion(text)` | æå–ç„¦ç‚¹é—®é¢˜ |
| `buildFocusQuestionPrompt(text)` | æ„å»ºæç¤ºè¯ |
| `cleanFocusQuestion(question)` | æ¸…ç†ç„¦ç‚¹é—®é¢˜æ ¼å¼ |
| `extractFocusQuestionWithRetry(text, maxRetries)` | å¸¦é‡è¯•çš„æå– |
| `validateFocusQuestion(question)` | éªŒè¯ç„¦ç‚¹é—®é¢˜è´¨é‡ |

##### ç„¦ç‚¹é—®é¢˜ç±»å‹
- **æ˜¯ä»€ä¹ˆ**: å®šä¹‰ã€æ¦‚å¿µç±»
- **æ€ä¹ˆæ ·**: ç‰¹ç‚¹ã€è¯„ä»·ç±»
- **æœ‰å“ªäº›**: åˆ†ç±»ã€åˆ—ä¸¾ç±»
- **å¦‚ä½•/æ€æ ·**: æ–¹æ³•ã€è¿‡ç¨‹ç±»
- **ä¸ºä»€ä¹ˆ**: åŸå› ã€ç›®çš„ç±»

---

#### 3.3.4 introduction-service.js - ä»‹ç»æ–‡æœ¬æœåŠ¡

**æ–‡ä»¶è·¯å¾„**: `llm/introduction-service.js`

**åŠŸèƒ½è¯´æ˜**: ç”Ÿæˆç„¦ç‚¹é—®é¢˜çš„çŸ¥è¯†ä»‹ç»æ–‡æœ¬ã€‚

##### ç±»: `IntroductionTextService`

| æ–¹æ³• | åŠŸèƒ½æè¿° |
|------|----------|
| `constructor(apiBaseUrl)` | åˆå§‹åŒ–æœåŠ¡ |
| `generateIntroduction(keyword, onChunk)` | æµå¼ç”Ÿæˆä»‹ç»æ–‡æœ¬ |
| `processStreamResponse(response, onChunk)` | å¤„ç†æµå¼å“åº” |
| `buildIntroPrompt(keyword)` | æ„å»ºä»‹ç»æç¤ºè¯ |

##### è¾“å‡ºæ ¼å¼è¦æ±‚
- ç¬¬ä¸€å¥å¿…é¡»åŒ…å«å››ä¸ªåˆ†æè§’åº¦
- åˆ† 2-3 æ®µï¼Œ300 å­—å·¦å³
- æ ¼å¼: "å¯¹äº[ä¸»é¢˜]ï¼Œå¯ä»¥ä»ã€è§’åº¦1ã€‘ã€ã€è§’åº¦2ã€‘ã€ã€è§’åº¦3ã€‘ã€ã€è§’åº¦4ã€‘å››ä¸ªæ–¹é¢è¿›è¡Œåˆ†æã€‚"

---

#### 3.3.5 image-concept-map-service.js - å›¾åƒæ¦‚å¿µå›¾æœåŠ¡

**æ–‡ä»¶è·¯å¾„**: `llm/image-concept-map-service.js`

**åŠŸèƒ½è¯´æ˜**: ä»ä¸Šä¼ å›¾ç‰‡ä¸­è¯†åˆ«æ–‡å­—å¹¶ç”Ÿæˆæ¦‚å¿µå›¾æ•°æ®ã€‚

##### ç±»: `ImageConceptMapService`

| æ–¹æ³• | åŠŸèƒ½æè¿° |
|------|----------|
| `constructor(apiBaseUrl)` | åˆå§‹åŒ–æœåŠ¡ |
| `generate(imageData, onChunk, onComplete, onError)` | æµå¼ç”Ÿæˆæ¦‚å¿µå›¾ |
| `parseFinalResponse(responseText, onComplete, onError)` | è§£ææœ€ç»ˆå“åº” |
| `buildPrompt()` | æ„å»ºå›¾åƒåˆ†ææç¤ºè¯ |
| `getTripleExtractionPromptSection()` | è·å–ä¸‰å…ƒç»„æå–è§„åˆ™ |

##### æ‰§è¡Œæµç¨‹
1. è¯†åˆ«å›¾åƒä¸­çš„æ–‡å­—
2. æç‚¼ç„¦ç‚¹é—®é¢˜
3. åŸºäºæ–‡å­—å†…å®¹æŠ½å–åˆ†å±‚ä¸‰å…ƒç»„
4. è¾“å‡ºç»“æ„åŒ– JSON

---

#### 3.3.6 concept-map-evaluation-service.js - æ¦‚å¿µå›¾è¯„ä»·æœåŠ¡

**æ–‡ä»¶è·¯å¾„**: `llm/concept-map-evaluation-service.js`

**åŠŸèƒ½è¯´æ˜**: ä½¿ç”¨ AI è‡ªåŠ¨è¯„ä»·ç”¨æˆ·ä¸Šä¼ çš„æ¦‚å¿µå›¾ã€‚

##### ç±»: `ConceptMapEvaluationService`

| æ–¹æ³• | åŠŸèƒ½æè¿° |
|------|----------|
| `constructor(apiBaseUrl)` | åˆå§‹åŒ–æœåŠ¡ |
| `analyzeConceptMap(imageData, customPrompt)` | åˆ†ææ¦‚å¿µå›¾ï¼ˆéæµå¼ï¼‰ |
| `quickAnalyze(imageData)` | å¿«é€Ÿåˆ†æï¼ˆé»˜è®¤æç¤ºè¯ï¼‰ |
| `analyzeWithQuestion(imageData, question)` | è‡ªå®šä¹‰é—®é¢˜åˆ†æ |
| `analyzeConceptMapStream(...)` | æµå¼åˆ†ææ¦‚å¿µå›¾ |
| `streamAnalyze(imageData, onChunk, onComplete, onError)` | æµå¼å¿«é€Ÿåˆ†æ |

---

### 3.4 ä»£ç†æœåŠ¡æ¨¡å— (agent/)

#### 3.4.1 dify-service.js - Dify å¯¹è¯æœåŠ¡

**æ–‡ä»¶è·¯å¾„**: `agent/dify-service.js`

**åŠŸèƒ½è¯´æ˜**: å°è£… Dify AI å¹³å°çš„å¯¹è¯æ¥å£ï¼Œæ”¯æŒæµå¼è¾“å‡ºã€‚

##### ç±»: `DifyService`

| æ–¹æ³• | åŠŸèƒ½æè¿° |
|------|----------|
| `constructor(apiKey, endpoint)` | åˆå§‹åŒ– Dify æœåŠ¡ |
| `chat(query, options, onChunk, onComplete, onError)` | å‘èµ·å¯¹è¯è¯·æ±‚ |
| `processStreamResponse(response, onChunk, onComplete)` | å¤„ç†æµå¼å“åº” |
| `handleError(error, onError)` | å¤„ç†é”™è¯¯ |

---

#### 3.4.2 misconception-service.js - è¿·æ€æ¦‚å¿µæœåŠ¡

**æ–‡ä»¶è·¯å¾„**: `agent/misconception-service.js`

**åŠŸèƒ½è¯´æ˜**: åŸºäº Dify AI æ¢æŸ¥çŸ¥è¯†ç‚¹çš„è¿·æ€æ¦‚å¿µã€‚

##### ç±»: `MisconceptionService`

| æ–¹æ³• | åŠŸèƒ½æè¿° |
|------|----------|
| `constructor(difyService)` | åˆå§‹åŒ–è¿·æ€æ¦‚å¿µæœåŠ¡ |
| `exploreMisconception(topic, onChunk, onComplete, onError)` | æ¢æŸ¥è¿·æ€æ¦‚å¿µ |
| `buildQuery(topic)` | æ„å»ºæŸ¥è¯¢æç¤ºè¯ |

##### åˆ†æç»´åº¦
1. å¸¸è§çš„é”™è¯¯ç†è§£æˆ–è¯¯è§£
2. å®¹æ˜“æ··æ·†çš„æ¦‚å¿µ
3. å­¦ä¹ è¿‡ç¨‹ä¸­å¯èƒ½äº§ç”Ÿçš„è®¤çŸ¥åå·®
4. ä¸æ­£ç¡®æ¦‚å¿µç›¸å¯¹ç«‹çš„é”™è¯¯è§‚ç‚¹

---

## 4. æ•°æ®æµç¨‹

### 4.1 ç„¦ç‚¹é—®é¢˜ç”Ÿæˆæ¦‚å¿µå›¾æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç„¦ç‚¹é—®é¢˜ â†’ æ¦‚å¿µå›¾ç”Ÿæˆæµç¨‹                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ç”¨æˆ·è¾“å…¥ç„¦ç‚¹é—®é¢˜                                                           â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ 1. ä»‹ç»æ–‡æœ¬ç”Ÿæˆ              â”‚  IntroductionTextService.generateIntroduction()â”‚
â”‚  â”‚    DeepSeek API (æµå¼)       â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                â”‚ è¿”å›: ä»‹ç»æ–‡æœ¬ (300å­—å·¦å³)                                  â”‚
â”‚                â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ 2. ä¸‰å…ƒç»„æå–                â”‚  LLMManager.extractTriples()              â”‚
â”‚  â”‚    DeepSeek API (æµå¼)       â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                â”‚ è¿”å›: ä¸‰å…ƒç»„åˆ—è¡¨ [["æ¦‚å¿µA", "å…³ç³»", "æ¦‚å¿µB", "L1-L2"], ...]â”‚
â”‚                â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ 3. æ•°æ®å¤„ç†                  â”‚  extractConceptsAndRelations()            â”‚
â”‚  â”‚    - æ„å»ºèŠ‚ç‚¹åˆ—è¡¨            â”‚  data-processing.js                       â”‚
â”‚  â”‚    - æ„å»ºè¿çº¿åˆ—è¡¨            â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                â”‚ è¿”å›: { nodes: [...], links: [...] }                       â”‚
â”‚                â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ 4. å¸ƒå±€è®¡ç®—                  â”‚  applySugiyamaLayout()                    â”‚
â”‚  â”‚    - å±‚çº§åˆ†é…                â”‚  sugiyama-layout.js                       â”‚
â”‚  â”‚    - äº¤å‰æœ€å°åŒ–              â”‚                                           â”‚
â”‚  â”‚    - èŠ‚ç‚¹å®šä½                â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                â”‚ è¿”å›: å¸¦åæ ‡çš„ graphData                                    â”‚
â”‚                â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ 5. SVG æ¸²æŸ“                  â”‚  displayConceptMap() / drawGraph()        â”‚
â”‚  â”‚    - ç»˜åˆ¶èŠ‚ç‚¹                â”‚  renderer.js                              â”‚
â”‚  â”‚    - ç»˜åˆ¶è¿çº¿                â”‚                                           â”‚
â”‚  â”‚    - ç»‘å®šäº¤äº’                â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 å›¾ç‰‡ç”Ÿæˆæ¦‚å¿µå›¾æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å›¾ç‰‡ â†’ æ¦‚å¿µå›¾ç”Ÿæˆæµç¨‹                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡                                                               â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ 1. å›¾åƒé¢„å¤„ç†                â”‚  displayUploadedImage()                   â”‚
â”‚  â”‚    - è½¬æ¢ä¸º Base64           â”‚                                           â”‚
â”‚  â”‚    - æ˜¾ç¤ºé¢„è§ˆ                â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                â”‚                                                            â”‚
â”‚                â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ 2. å›¾åƒåˆ†æ + ä¸‰å…ƒç»„æå–     â”‚  ImageConceptMapService.generate()        â”‚
â”‚  â”‚    Qwen VL Plus API (æµå¼)   â”‚                                           â”‚
â”‚  â”‚    - è¯†åˆ«å›¾åƒæ–‡å­—            â”‚                                           â”‚
â”‚  â”‚    - æç‚¼ç„¦ç‚¹é—®é¢˜            â”‚                                           â”‚
â”‚  â”‚    - æŠ½å–ä¸‰å…ƒç»„              â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                â”‚ è¿”å›: { focusQuestion, triples }                          â”‚
â”‚                â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ 3. åç»­å¤„ç†åŒç„¦ç‚¹é—®é¢˜æµç¨‹     â”‚                                           â”‚
â”‚  â”‚    æ•°æ®å¤„ç† â†’ å¸ƒå±€ â†’ æ¸²æŸ“     â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 é«˜æ”¯æ¶æ¦‚å¿µå›¾ç”Ÿæˆæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      é«˜æ”¯æ¶æ¦‚å¿µå›¾ç”Ÿæˆæµç¨‹                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ç”¨æˆ·è¾“å…¥ç„¦ç‚¹é—®é¢˜ + é€‰æ‹©é«˜æ”¯æ¶                                              â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ 1. å®Œæ•´æ¦‚å¿µå›¾ç”Ÿæˆ            â”‚  generateHighScaffoldConceptMap()         â”‚
â”‚  â”‚    (åŒæ ‡å‡†æµç¨‹)              â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                â”‚ è¿”å›: å®Œæ•´çš„ fullGraphData                                 â”‚
â”‚                â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ 2. èŠ‚ç‚¹ç§»é™¤                  â”‚  removeNodesForScaffold()                 â”‚
â”‚  â”‚    - éšæœºç§»é™¤éƒ¨åˆ†èŠ‚ç‚¹        â”‚                                           â”‚
â”‚  â”‚    - ä¿ç•™æ ¸å¿ƒç»“æ„            â”‚                                           â”‚
â”‚  â”‚    - ç”Ÿæˆå€™é€‰èŠ‚ç‚¹åˆ—è¡¨        â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                â”‚ è¿”å›: { incompleteGraph, candidateNodes, expertData }     â”‚
â”‚                â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ 3. ç•Œé¢å¸ƒå±€                  â”‚  setupScaffoldLayout()                    â”‚
â”‚  â”‚    - å·¦ä¾§: å€™é€‰èŠ‚ç‚¹åˆ—è¡¨      â”‚                                           â”‚
â”‚  â”‚    - ä¸­é—´: ä¸å®Œæ•´æ¦‚å¿µå›¾      â”‚                                           â”‚
â”‚  â”‚    - å³ä¾§: ä¸“å®¶æ¦‚å¿µå›¾        â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                â”‚                                                            â”‚
â”‚                â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ 4. ç”¨æˆ·äº¤äº’                  â”‚                                           â”‚
â”‚  â”‚    - æ‹–æ‹½å€™é€‰èŠ‚ç‚¹åˆ°å ä½ç¬¦    â”‚  addCandidateNodeToGraph()                â”‚
â”‚  â”‚    - å®æ—¶æ£€éªŒæ­£ç¡®æ€§          â”‚  checkNodeCorrectness()                   â”‚
â”‚  â”‚    - æ˜¾ç¤ºæ­£ç¡®ç‡ç»Ÿè®¡          â”‚  updateCorrectnessStats()                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. åŠŸèƒ½æ¸…å•

### 5.1 æ¦‚å¿µå›¾ç”ŸæˆåŠŸèƒ½

| åŠŸèƒ½ | å…¥å£å‡½æ•° | æè¿° |
|------|----------|------|
| ç„¦ç‚¹é—®é¢˜ç”Ÿæˆ | `generateConceptMapWithLLM('keyword', ...)` | åŸºäºç„¦ç‚¹é—®é¢˜ç”Ÿæˆæ¦‚å¿µå›¾ |
| æ–‡æœ¬åˆ†æç”Ÿæˆ | `generateConceptMapWithLLM('description', ...)` | åˆ†ææ–‡æœ¬ç”Ÿæˆæ¦‚å¿µå›¾ |
| å›¾ç‰‡ç”Ÿæˆ | `generateConceptMapFromImage()` | ä»å›¾ç‰‡è¯†åˆ«ç”Ÿæˆæ¦‚å¿µå›¾ |
| é«˜æ”¯æ¶ç”Ÿæˆ | `generateHighScaffoldConceptMap()` | é«˜æ”¯æ¶æ¨¡å¼æ¦‚å¿µå›¾ |
| ä½æ”¯æ¶ç”Ÿæˆ | `generateLowScaffoldConceptMap()` | ä½æ”¯æ¶æ¨¡å¼æ¦‚å¿µå›¾ |

### 5.2 å›¾å½¢ç¼–è¾‘åŠŸèƒ½

| åŠŸèƒ½ | å…¥å£å‡½æ•° | æè¿° |
|------|----------|------|
| æ·»åŠ èŠ‚ç‚¹ | `addNewNode()` | æ·»åŠ æ–°èŠ‚ç‚¹ |
| åˆ é™¤èŠ‚ç‚¹ | `deleteSelectedNode()` | åˆ é™¤é€‰ä¸­èŠ‚ç‚¹ |
| ç¼–è¾‘èŠ‚ç‚¹ | `editNodeText()` | ç¼–è¾‘èŠ‚ç‚¹æ–‡æœ¬ |
| ç¼©æ”¾èŠ‚ç‚¹ | `handleResize()` | è°ƒæ•´èŠ‚ç‚¹å¤§å° |
| æ·»åŠ è¿çº¿ | `addNewLink()` | æ·»åŠ æ–°è¿çº¿ |
| åˆ é™¤è¿çº¿ | `deleteSelectedLink()` | åˆ é™¤é€‰ä¸­è¿çº¿ |
| ç¼–è¾‘è¿çº¿ | `editLinkLabel()` | ç¼–è¾‘è¿çº¿æ ‡ç­¾ |
| èšåˆè¿çº¿ | `createAggregatedLinks()` | åˆ›å»ºèšåˆè¿çº¿ |
| åŒçº§è¿çº¿ | `createSameLayerLink()` | åˆ›å»ºåŒçº§è¿çº¿ |

### 5.3 å¸ƒå±€åŠŸèƒ½

| åŠŸèƒ½ | å…¥å£å‡½æ•° | æè¿° |
|------|----------|------|
| æ™ºèƒ½å¸ƒå±€ | `applyIntelligentLayout()` | è‡ªåŠ¨é€‰æ‹©æœ€ä½³å¸ƒå±€ |
| å±‚æ¬¡å¸ƒå±€ | `applySugiyamaLayout()` | Sugiyama å±‚æ¬¡å¸ƒå±€ |
| åŠ›å¯¼å‘å¸ƒå±€ | `applyForceDirectedLayout()` | åŠ›å¯¼å‘å¸ƒå±€ |
| åˆ‡æ¢å¸ƒå±€ | `changeLayout()` | åˆ‡æ¢å¸ƒå±€ç±»å‹ |

### 5.4 äº¤äº’åŠŸèƒ½

| åŠŸèƒ½ | å…¥å£å‡½æ•° | æè¿° |
|------|----------|------|
| èŠ‚ç‚¹æ‹–æ‹½ | `startDrag()` | æ‹–æ‹½ç§»åŠ¨èŠ‚ç‚¹ |
| ç”»å¸ƒç¼©æ”¾ | `enableCanvasZoom()` | ç¼©æ”¾ç”»å¸ƒ |
| æ’¤é”€æ“ä½œ | `undoOperation()` | æ’¤é”€ |
| é‡åšæ“ä½œ | `redoOperation()` | é‡åš |
| é€‰æ‹©å…¨éƒ¨ | `selectAllNodes()` | é€‰æ‹©æ‰€æœ‰èŠ‚ç‚¹ |

### 5.5 å¯¼å‡ºåŠŸèƒ½

| åŠŸèƒ½ | å…¥å£å‡½æ•° | æè¿° |
|------|----------|------|
| ä¿å­˜ JSON | `saveConceptMap()` | ä¿å­˜ä¸º JSON æ–‡ä»¶ |
| åŠ è½½ JSON | `loadConceptMap()` | åŠ è½½ JSON æ–‡ä»¶ |
| ä¸‹è½½ PNG | `downloadConceptMapImage()` | ä¸‹è½½ä¸º PNG å›¾ç‰‡ |
| å¯¼å‡ºæ”¯æ¶å›¾ | `exportScaffoldConceptMap()` | å¯¼å‡ºæ”¯æ¶æ¦‚å¿µå›¾ |
| å¯¼å‡ºä¸“å®¶å›¾ | `exportExpertConceptMap()` | å¯¼å‡ºä¸“å®¶æ¦‚å¿µå›¾ |

---

## 6. æŠ€æœ¯æ ˆ

### 6.1 å‰ç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| HTML5 | - | é¡µé¢ç»“æ„ |
| CSS3 | - | æ ·å¼è®¾è®¡ |
| JavaScript | ES6+ | ä¸šåŠ¡é€»è¾‘ |
| SVG | - | å›¾å½¢æ¸²æŸ“ |
| D3.js | - | æ•°æ®å¯è§†åŒ–ï¼ˆéƒ¨åˆ†åŠŸèƒ½ï¼‰ |

### 6.2 åç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Python | 3.8+ | åç«¯è¯­è¨€ |
| FastAPI | - | Web æ¡†æ¶ |
| Uvicorn | - | ASGI æœåŠ¡å™¨ |
| OpenAI SDK | - | LLM æ¥å£ |

### 6.3 AI æ¨¡å‹

| æ¨¡å‹ | æä¾›å•† | ç”¨é€” |
|------|--------|------|
| DeepSeek | æ·±åº¦æ±‚ç´¢ | æ–‡æœ¬å¤„ç†ã€ä¸‰å…ƒç»„æå– |
| Qwen VL Plus | é˜¿é‡Œäº‘ | å›¾åƒç†è§£ã€æ¦‚å¿µå›¾åˆ†æ |
| Dify Workflow | Dify | è¿·æ€æ¦‚å¿µæ¢æŸ¥ |

### 6.4 ä¾èµ–æ¸…å•

```
# Python ä¾èµ– (requirements.txt)
fastapi>=0.100.0
uvicorn>=0.23.0
openai>=1.0.0
python-dotenv>=1.0.0
python-multipart>=0.0.6
```

---

## é™„å½•: å‡½æ•°ç´¢å¼•

### A. core.js å‡½æ•°ç´¢å¼• (67 ä¸ªå‡½æ•°)

| åºå· | å‡½æ•°å | è¡Œå· |
|------|--------|------|
| 1 | cleanup | 35 |
| 2 | initializePage | 45 |
| 3 | displayUploadedImage | 85 |
| 4 | exploreMisconception | 177 |
| 5 | generateHighScaffoldConceptMap | 432 |
| 6 | generateLowScaffoldConceptMap | 746 |
| 7 | extractConceptsAndRelations | 959 |
| 8 | setupLowScaffoldLayout | 1090 |
| 9 | bindLowScaffoldButtonEvents | 1248 |
| 10 | displayLowScaffoldConcepts | 1282 |
| 11 | displayLowScaffoldRelations | 1427 |
| 12 | initLowScaffoldInteractions | 1552 |
| 13 | addLowScaffoldNode | 1621 |
| 14 | bindLowScaffoldNodeEvents | 1697 |
| 15 | startLowScaffoldLinking | 1792 |
| 16 | cancelLowScaffoldLinking | 1813 |
| 17 | createLowScaffoldLink | 1833 |
| 18 | drawLowScaffoldLink | 1875 |
| 19 | bindLowScaffoldLinkEvents | 1946 |
| 20 | updateLowScaffoldLinks | 2012 |
| 21 | markConceptAsUsed | 2065 |
| 22 | markRelationAsUsed | 2084 |
| 23 | removeNodesForScaffold | 2099 |
| 24 | setupScaffoldLayout | 2231 |
| 25 | exportScaffoldConceptMap | 2352 |
| 26 | exportExpertConceptMap | 2589 |
| 27 | doExportExpertSvg | 2641 |
| 28 | displayIncompleteConceptMap | 2743 |
| 29 | findPlaceholderNodeAtPosition | 2853 |
| 30 | highlightPlaceholderNode | 2909 |
| 31 | clearPlaceholderHighlight | 2959 |
| 32 | setupGraphDropZone | 3003 |
| 33 | displayCandidateNodes | 3152 |
| 34 | addCandidateNodeToGraphAtPosition | 3251 |
| 35 | addCandidateNodeToGraph | 3342 |
| 36 | markCandidateNodeAsAdded | 3474 |
| 37 | applyLayoutAndRedraw | 3516 |
| 38 | redrawWithoutLayout | 3684 |
| 39 | saveScaffoldUndoState | 3739 |
| 40 | scaffoldUndo | 3792 |
| 41 | rebindCandidateNodeDragEvents | 3889 |
| 42 | clearScaffoldUndoStack | 3963 |
| 43 | initScaffoldKeyboardShortcuts | 3971 |
| 44 | drawPlaceholderBoxes | 4005 |
| 45 | restoreNodeLinks | 4080 |
| 46 | checkNodeCorrectness | 4125 |
| 47 | updateCorrectnessStats | 4178 |
| 48 | checkScaffoldCompletion | 4249 |
| 49 | displayExpertConceptMap | 4299 |
| 50 | adjustExpertMapViewBox | 4416 |
| 51 | generateConceptMapFromImage | 4456 |
| 52 | analyzeUploadedConceptMap | 4678 |
| 53 | resetView | 4816 |
| 54 | resetGenerateButtons | 5019 |
| 55 | generateConceptMapWithLLM | 5033 |
| 56 | generateFocusQuestion | 5436 |
| 57 | clearPreviousConceptMap | 5467 |
| 58 | addFocusQuestion | 6128 |
| 59 | addAggregatedLink | 6174 |
| 60 | addSameLayerLink | 6205 |
| 61 | addSameLayerAggregatedLink | 6236 |

### B. renderer.js å‡½æ•°ç´¢å¼• (36 ä¸ªå‡½æ•°)

| åºå· | å‡½æ•°å | è¡Œå· |
|------|--------|------|
| 1 | getBezierPoint | 16 |
| 2 | calculateCurvedLinkPositions | 34 |
| 3 | displayConceptMap | 134 |
| 4 | drawGraph | 241 |
| 5 | enableCanvasZoom | 775 |
| 6 | getGraphCenter | 818 |
| 7 | resolveLinkLabelOverlaps | 939 |
| 8 | updateConnectedLinks | 1124 |
| 9 | updateAggregatedLinkPosition | 1239 |
| 10 | redrawSingleLink | 1411 |
| 11 | updateLinkPosition | 1675 |
| 12 | redrawAllLinks | 1875 |
| 13 | showLoadingAnimation | 2142 |
| 14 | showContentLoadingState | 2243 |
| 15 | escapeHtml | 2264 |
| 16 | updateGenerationInfo | 2271 |
| 17 | updateErrorState | 2372 |
| 18 | hideLoadingState | 2386 |
| 19 | ensureCanvasVisible | 2399 |
| 20 | ensureGraphInitialized | 2419 |
| 21 | updateHistoryButtons | 2435 |
| 22 | updateStatusBar | 2454 |
| 23 | showLoadingState | 2473 |
| 24 | displayFocusQuestion | 2486 |
| 25 | makeFocusQuestionDraggable | 2653 |
| 26 | editFocusQuestionText | 2772 |
| 27 | showMessage | 2953 |
| 28 | updateNodeOperationButtons | 2997 |
| 29 | detectAggregatedLinks | 3020 |
| 30 | drawAggregatedLink | 3063 |
| 31 | editAggregateLinkLabel | 3308 |
| 32 | detectSameLayerAggregatedLinks | 3408 |
| 33 | drawSameLayerAggregatedLink | 3484 |
| 34 | editSameLayerAggregateLinkLabel | 3822 |

### C. interactions.js å‡½æ•°ç´¢å¼• (50 ä¸ªå‡½æ•°)

| åºå· | å‡½æ•°å | è¡Œå· |
|------|--------|------|
| 1 | editNodeText | 10 |
| 2 | selectNode | 181 |
| 3 | deselectNode | 261 |
| 4 | selectAllNodes | 303 |
| 5 | selectLink | 358 |
| 6 | deselectLink | 404 |
| 7 | addNodeHandles | 426 |
| 8 | createHandle | 466 |
| 9 | createArrow | 502 |
| 10 | removeNodeHandles | 522 |
| 11 | addResizeHandlers | 528 |
| 12 | handleResize | 555 |
| 13 | handleResizeEnd | 628 |
| 14 | addNewNode | 656 |
| 15 | deleteSelectedNode | 708 |
| 16 | editSelectedNode | 763 |
| 17 | editLinkLabel | 801 |
| 18 | saveEdit | 852 |
| 19 | updateInputPosition | 889 |
| 20 | addConnectionHandlers | 934 |
| 21 | enterConnectionMode | 964 |
| 22 | handleConnectionTargetSelection | 989 |
| 23 | exitConnectionMode | 1013 |
| 24 | addNewLink | 1036 |
| 25 | enterLinkCreationMode | 1060 |
| 26 | exitLinkCreationMode | 1084 |
| 27 | handleLinkNodeSelection | 1110 |
| 28 | highlightNodeForLink | 1143 |
| 29 | clearTemporaryNodeSelection | 1160 |
| 30 | createLink | 1208 |
| 31 | deleteSelectedLink | 1262 |
| 32 | editSelectedLink | 1291 |
| 33 | updateLinkOperationButtons | 1314 |
| 34 | enterConnectionDragMode | 1333 |
| 35 | createVirtualConnectionLine | 1352 |
| 36 | handleConnectionDrag | 1410 |
| 37 | handleConnectionDragEnd | 1438 |
| 38 | startDrag | 1485 |
| 39 | handleDrag | 1521 |
| 40 | handleDragEnd | 1596 |
| 41 | enterClickLinkCreationMode | 1661 |
| 42 | enableNodeClickForLinkCreation | 1741 |
| 43 | handleNodeClickForLink | 1762 |
| 44 | exitClickLinkCreationMode | 1924 |
| 45 | createAggregatedLinks | 2019 |
| 46 | createSameLayerLink | 2071 |
| 47 | createSameLayerAggregatedLinks | 2115 |

### D. utilities.js å‡½æ•°ç´¢å¼• (18 ä¸ªå‡½æ•°)

| åºå· | å‡½æ•°å | è¡Œå· |
|------|--------|------|
| 1 | applyAutoLayout | 10 |
| 2 | applyHierarchicalLayout | 25 |
| 3 | changeLayout | 43 |
| 4 | calculateSingleDetourPoint | 187 |
| 5 | calculateDetourPoints | 275 |
| 6 | adjustNodePositionsToAvoidOverlap | 378 |
| 7 | optimizeLabelPositions | 406 |
| 8 | calculateLabelOverlap | 461 |
| 9 | ensureUniformSpacing | 498 |
| 10 | saveConceptMap | 556 |
| 11 | loadConceptMap | 583 |
| 12 | saveToHistory | 616 |
| 13 | undoOperation | 641 |
| 14 | redoOperation | 657 |
| 15 | clearHistory | 673 |
| 16 | exportConceptMap | 687 |
| 17 | downloadConceptMapImage | 703 |
| 18 | exitAllEditModes | 822 |

---

*æ–‡æ¡£ç”Ÿæˆå®Œæˆ - 2025å¹´12æœˆ18æ—¥*

